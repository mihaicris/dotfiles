#!/usr/bin/env zsh

FILES=$(git diff develop..HEAD --diff-filter=AM --name-only | grep -e '\(.*\).swift$' | awk 'NF { print "\""$0"\""}' ORS=' ')

heading "Swift format"
eval "swift-format -i -m format --configuration ~/.dotfiles/source/.swift-format.json $FILES"

heading "Swiftlint autocorrect"
eval "swiftlint autocorrect --config ~/.dotfiles/source/.swiftlint.yml $FILES"

heading "Swiftlint"
eval "swiftlint lint --config ~/.dotfiles/source/.swiftlint.yml $FILES"
